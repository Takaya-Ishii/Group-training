<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<link th:href="@{/css/grouptraining.css}" rel="stylesheet">
	<title>研修管理システム</title>
</head>
<body>
	<!-- ヘッダー -->
	<header th:fragment="header">
	<div>
		<nav>
			<div>
				研修管理システム
				<ul class="nav">
					<li sec:authorize="hasAuthority('ROLE_講師')"><a th:href="@{/admin/Training}">研修管理</a></li>
					<li sec:authorize="hasAuthority('ROLE_講師')"><a th:href="@{/admin/Group}">グループ管理</a></li>
					<li sec:authorize="hasAuthority('ROLE_講師')"><a th:href="@{/admin/User}">ユーザー管理</a></li>

					<!-- 報告確認機能はスコープ外なのでコメントアウト
					<li sec:authorize="hasAuthority('ROLE_講師')"><a th:href="@{/admin/○○}">報告確認</a></li>
					-->
					<!-- トーク機能はスコープ外なのでコメントアウト
					<li sec:authorize="hasAuthority('ROLE_受講者')"><a th:href="@{/participant/talk}">トーク</a></li>	
					-->

					<li sec:authorize="hasAuthority('ROLE_受講者') and not hasAuthority('ROLE_講師')"><a th:href="@{/participant/traCourse}">受講研修</a></li>

					<!-- 週間報告機能はスコープ外なのでコメントアウト
					<li sec:authorize="hasAuthority('ROLE_受講者') and not hasAuthority('ROLE_講師')">
					<a th:href="@{/participant/○○}">週間報告</a></li>
					-->

					<li sec:authorize="hasAuthority('ROLE_受講者') and not hasAuthority('ROLE_講師')"><a th:href="@{/participant/traCourse}">[[${group_name}]]</a></li>
						
					<li><form th:action="@{/logout}" method="post">
						<input type="submit" value="ログアウト">
						</form></li>
				</ul>
			</div>
		</nav>
	</div>
	</header>
	
	<main>
		<h2>研修一覧</h2>
		<!--削除したらここにメッセージを表示する-->
		<!--表示するメッセージごとに色を分ける-->
		<p class="message" th:if="${errorMessage}"
			th:text="${errorMessage}" style="background-color: rgb(255, 212, 212);">
			エラーメッセージ
		</p>
		
		<p class="message" th:if="${message}"
			th:text="${message}" style="background-color: rgb(193,254,228 );">
			新規登録・更新・削除メッセージ
		</p>
		<div class="serchcont">
			<form action="/admin/Training/serch" method="get">
				<label for="get-value">研修名</label>
				
				<!--検索したキーワードを残しておく-->
				<input type="text" name="tra_name" th:value="${tra_name}">
				<button type="submit" class="serchbtn">検索</button>
			</form>
		</div>
		
		<div class="maincont">
			<table class="table" border="1">
				<thead>
					<tr>
						<th>研修ID</th>
						<th class="研修名">研修名</th>
						<th>想定時間</th>
						<th>詳細</th>
					</tr>
				</thead>
	
				<tbody>
					<tr th:each="Tra : ${tra_list}">
						<td th:text="${Tra.tra_id}"></td>
						<td th:text="${Tra.tra_name}"></td>
						<td th:text="${Tra.est_time} + 時間"></td>
						<td>
							<a class="maru" th:href="@{/admin/Training/{tra_id}(tra_id=${Tra.tra_id})}">
								●
							</a>
						</td>
					</tr>
				</tbody>
			</table>
			
			<form class="tablebtnR" th:action="@{/admin/Training/save}">
				<button class="NewRegisterbtn" type="submit">新規登録</button>
			</form>
		</div>
	</main>
</body>
</html>